<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz Kykygosed</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    font-family: Arial, sans-serif;
    overflow: hidden;
  }

  body {
    display: flex;
    justify-content: center;
    align-items: center;
    background: linear-gradient(270deg, red, orange, yellow, green, blue, indigo, violet);
    background-size: 1400% 1400%;
    animation: rainbow 20s ease infinite;
    color: white;
    text-align: center;
  }

  @keyframes rainbow {
    0%{background-position:0% 50%}
    50%{background-position:100% 50%}
    100%{background-position:0% 50%}
  }

  #container {
    position: relative;
    max-width: 700px;
    width: 90%;
  }

  #text, #question {
    font-size: 20px;
    margin: 20px 0;
    opacity: 0;
    transition: opacity 0.5s ease;
  }

  #text.show, #question.show {
    opacity: 1;
  }

  button {
    margin: 10px;
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
    border: none;
    border-radius: 5px;
    color: white;
  }

  .vrai { background-color: green; }
  .faux { background-color: red; }
  .retour { background-color: black; position: fixed; bottom: 10px; left: 10px; display: none; }
  .suivant { background-color: blue; position: fixed; bottom: 10px; right: 10px; display: none; }
  .recommencer { background-color: purple; position: fixed; bottom: 10px; right: 10px; display: none; }
  #finalTitle { font-size: 40px; margin-bottom: 20px; color: yellow; }
</style>
</head>
<body>
<div id="container">
  <div id="text"></div>
  <div id="question"></div>
</div>

<button class="retour" id="retourBtn" onclick="retour()">Retour</button>
<button class="suivant" id="suivantBtn" onclick="suivant()">Suivant</button>
<button class="recommencer" id="recommencerBtn" onclick="recommencer()">Recommencer</button>

<script>
const textDiv = document.getElementById('text');
const questionDiv = document.getElementById('question');
const retourBtn = document.getElementById('retourBtn');
const suivantBtn = document.getElementById('suivantBtn');
const recommencerBtn = document.getElementById('recommencerBtn');

let etape = 0; 
let timeoutID;

function resetAll() {
  textDiv.classList.remove("show");
  questionDiv.classList.remove("show");
  textDiv.textContent = "";
  questionDiv.innerHTML = "";
  suivantBtn.style.display = "none";
  recommencerBtn.style.display = "none";
  retourBtn.style.display = "none";
  clearTimeout(timeoutID);
}

function showText(content) {
  textDiv.innerHTML = content;
  questionDiv.innerHTML = "";
  setTimeout(() => textDiv.classList.add("show"), 50);
}

function showQuestion(content) {
  questionDiv.innerHTML = content;
  setTimeout(() => questionDiv.classList.add("show"), 50);
}

function start() {
  resetAll();
  etape = 1;
  showText("Je sais que tu es gay, Kykygosed, mais je n'ai pas de preuve");
  timeoutID = setTimeout(() => {
    textDiv.classList.remove("show");
    setTimeout(() => {
      etape1();
    }, 500);
  }, 5000);
}

function etape1() {
  showQuestion(`<p>Est-ce que vous avez déjà rêvé d'un pote en train de faire des bailles chelou ??</p>
    <button class="vrai" onclick="choix(true, 2)">Vrai</button>
    <button class="faux" onclick="choix(false, 3)">Faux</button>`);
  // PAS de bouton "Retour" pour cette première question
}

function choix(isVrai, nextStep) {
  textDiv.classList.remove("show");
  questionDiv.classList.remove("show");
  timeoutID = setTimeout(() => {
    resetAll();
    etape = nextStep;

    if (![1,1.1].includes(etape)) retourBtn.style.display = "block";

    switch(etape){
      case 2: 
        showText("Ah ouais, c'est vrai que t'es gay moi aussi, ça fait un moment que je voulais te le dire, mais j'aime ton chien avec sa queue bien longue");
        suivantBtn.style.display = "block"; 
        break;
      case 3: 
        showText("Mais arrête de mentir, espèce de gros menteur va !");
        break;
      case 4: 
        showQuestion(`<p>Est-ce que tu es déjà allé sur la catégorie homosexuelle sur Pornhub ?</p>
          <button class="vrai" onclick="choix(true,5)">Vrai</button>
          <button class="faux" onclick="choix(false,6)">Faux</button>`);
        retourBtn.style.display = "block";
        break;
      case 5: 
        showText("Bien joué, t'es un vrai fils de pute, il te reste plus qu'une question");
        suivantBtn.style.display = "block";
        break;
      case 6: 
        showText("ALLER, ASSUME, ON L'A FAIT ENSEMBLE MÊME");
        break;
      case 7: 
        showText("Attention, dernière question, mon petit cookie");
        timeoutID = setTimeout(() => {
          textDiv.classList.remove("show");
          setTimeout(() => {
            etape = 8;
            showQuestion(`<p>As-tu déjà fait un plan à trois avec des gars ?</p>
              <button class="vrai" onclick="choix(true,9)">Vrai</button>
              <button class="faux" onclick="choix(false,10)">Faux</button>`);
            retourBtn.style.display = "block";
          }, 500);
        }, 3000); // durée augmentée à 3s
        break;
      case 9: 
        resetAll();
        showText(`<div id="finalTitle">Finally, bitche</div>
          <p>Petit cachotier, tu es à 3/3, tu es vraiment l'homosexuel que tu penses être</p>`);
        retourBtn.style.display = "block";
        recommencerBtn.style.display = "block";
        break;
      case 10: 
        showText("Mais t'es con, on l'a fait le weekend dernier avec Mae");
        break;
    }
  }, 500);
}

function suivant(){
  resetAll();
  if(etape === 2){
    etape = 4;
    etape1_questionPornhub();
  } else if(etape === 5){
    etape = 7;
    choix(null,7);
  }
}

function retour(){
  resetAll();
  switch(etape){
    case 2: 
    case 3: 
      etape1();
      break;
    case 5: 
    case 6: 
      etape = 4;
      etape1_questionPornhub();
      break;
    case 10: 
    case 9: 
    case 8:
      etape = 7;
      choix(null,7);
      break;
  }
}

function etape1_questionPornhub(){
  showQuestion(`<p>Est-ce que tu es déjà allé sur la catégorie homosexuelle sur Pornhub ?</p>
    <button class="vrai" onclick="choix(true,5)">Vrai</button>
    <button class="faux" onclick="choix(false,6)">Faux</button>`);
  retourBtn.style.display = "block";
}

function recommencer(){
  start();
}

start();
</script>
</body>
</html>
